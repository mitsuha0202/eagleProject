<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminVo">
	<resultMap type="com.kh.eg.admin.model.vo.AdminVo" id="adminResultSet">
		<result property="memberName" column="MEMBERNAME" />
		<result property="memberId" column="MEMBERID" />
		<result property="accountn" column="ACCOUNTN" />
		<result property="phone" column="PHONE" />
		<result property="address" column="ADDRESS" />
		<result property="rating" column="RATING" />
		<result property="eMoney" column="EMONEY" />
		<result property="wdStatus" column="WDSTATUS" />
		<result property="blStatus" column="BLSTATUS" />
		<result property="eMail" column="EMAIL" />

	</resultMap>

	<!-- <select id="loginCheck" resultMap="memberResultSet" parameterType="Member"> 
		SELECT * FROM MEMBER WHERE MEMBERID = #{userId} AND MEMBERPWD = #{userPwd} 
		AND BLSTATUS = 'Y' </select> <insert id="insertMember" parameterType="Member"> 
		INSERT INTO MEMBER VALUES(SEQ_MID.NEXTVAL, #{userId}, #{userPwd}, #{userName}, 
		#{email}, #{birthDay}, #{gender}, #{phone}, #{address}, SYSDATE, SYSDATE, 
		DEFAULT ) </insert> 암호화된 비밀번호 조회용 메소드 <select id="selectPwd" resultType="java.lang.String" 
		parameterType="java.lang.String"> SELECT USER_PWD FROM MEMBER WHERE USER_ID 
		= #{userId} AND STATUS = 'Y' </select> -->

	<!-- 회원조회 -->
	<select id="selectMemberList" resultMap="adminResultSet">
		SELECT MEMBERNAME,
		MEMBERID, ACCOUNTN, PHONE, ADDRESS, RATING, EMAIL, EMONEY, WDSTATUS
		FROM MEMBER
		WHERE BLSTATUS = 'N' AND WDSTATUS = 'N'
	</select>
	
	<!-- 회원조회 페이징 -->
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*)
		FROM
		MEMBER
		WHERE BLSTATUS = 'N' AND WDSTATUS = 'N'
	</select>
	
	<!-- 블랙리스트 조회 -->
	<select id="selectBlackList" resultMap="adminResultSet">
		SELECT MEMBERNAME,
		MEMBERID, ACCOUNTN, PHONE, ADDRESS, RATING, EMAIL, EMONEY, WDSTATUS
		FROM MEMBER
		WHERE BLSTATUS = 'Y'
	</select>
	
	<!-- 블랙리스트 페이징 -->
	<select id="selectBlackListCount" resultType="_int">
		SELECT COUNT(*)
		FROM MEMBER
		WHERE BLSTATUS = 'Y'
	</select>
	
	<!-- 검색결과 회원목록 페이징 카운트 -->
	<select id="SearchListCount" resultType="_int" parameterType="com.kh.eg.admin.model.vo.SearchCondition">
		SELECT COUNT(*)
		FROM
		MEMBER
		WHERE BLSTATUS = 'N' AND WDSTATUS = 'N'
		<choose>
			<when test="userId != null">
				AND MEMBERID = #{userId}
			</when>
			<when test="userName != null">
				AND MEMBERNAME LIKE '%' || #{userName} || '%'
			</when>
			<otherwise>
				AND PHONE LIKE '%' || #{phone} || '%'
			</otherwise>
		</choose>
	</select>

	<!-- 검색결과 조회 -->
	<select id="searchMemberList" resultMap="adminResultSet" parameterType="com.kh.eg.admin.model.vo.SearchCondition">
		SELECT MEMBERNAME,
		MEMBERID, ACCOUNTN, PHONE, ADDRESS, RATING, EMAIL, EMONEY, WDSTATUS
		FROM MEMBER
		WHERE BLSTATUS = 'N' AND WDSTATUS = 'N'
		<choose>
			<when test="userId != null">
				AND MEMBERID = #{userId}
			</when>
			<when test="userName != null">
				AND MEMBERNAME LIKE '%' || #{userName} || '%'
			</when>
			<otherwise>
				AND PHONE LIKE '%' || #{phone} || '%'
			</otherwise>
		</choose>
	</select>
	
	<!-- 검색결과 블랙리스트목록 페이징 카운트 -->
	<select id="SearchBlackListCount" resultType="_int" parameterType="com.kh.eg.admin.model.vo.SearchCondition">
		SELECT COUNT(*)
		FROM
		MEMBER
		WHERE BLSTATUS = 'Y'
		<choose>
			<when test="userId != null">
				AND MEMBERID = #{userId}
			</when>
			<when test="userName != null">
				AND MEMBERNAME LIKE '%' || #{userName} || '%'
			</when>
			<otherwise>
				AND PHONE LIKE '%' || #{phone} || '%'
			</otherwise>
		</choose>
	</select>
	
	<!-- 블랙리스트 검색결과 조회 -->
	<select id="searchBlackList" resultMap="adminResultSet" parameterType="com.kh.eg.admin.model.vo.SearchCondition">
		SELECT MEMBERNAME,
		MEMBERID, ACCOUNTN, PHONE, ADDRESS, RATING, EMAIL, EMONEY, WDSTATUS
		FROM MEMBER
		WHERE BLSTATUS = 'Y'
		<choose>
			<when test="userId != null">
				AND MEMBERID = #{userId}
			</when>
			<when test="userName != null">
				AND MEMBERNAME LIKE '%' || #{userName} || '%'
			</when>
			<otherwise>
				AND PHONE LIKE '%' || #{phone} || '%'
			</otherwise>
		</choose>
	</select>
	
	<!-- 회원 사이버머니 관리 리스트 -->
	<select id="memberMoneyList" resultMap="adminResultSet">
		SELECT MEMBERNAME,
		MEMBERID, ACCOUNTN, PHONE, ADDRESS, RATING, EMAIL, EMONEY, WDSTATUS
		FROM MEMBER
	</select>
	
	
</mapper>








