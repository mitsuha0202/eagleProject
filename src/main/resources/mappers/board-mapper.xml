<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Board">
	<resultMap type="com.kh.eg.board.model.vo.Board" id="boardResultSet">
		<id property="bid" column="BOARDNO"></id>
		<result property="bTitle" column="TITLE"/>
		<result property="bContent" column="BOARDCONTENT"/>
		<result property="bMid" column="MEMBERNO"/>
		<result property="writeDay" column="WRITEDAY"/>
		<result property="bStatus" column="DELETESTATUS"/>
		<result property="bType" column="BOARDSTATUS"/>
		<result property="reStatus" column="REPLYSTATUS"/>
		<result property="bCount" column="BCOUNT"/>
	</resultMap>
	
	<!-- 어레이리스트 추가한 resultMap -->
	<resultMap type="com.kh.eg.board.model.vo.Board" id="boardResultSet2">
		<id property="bid" column="BOARDNO"></id>
		<result property="bTitle" column="TITLE"/>
		<result property="bContent" column="BOARDCONTENT"/>
		<result property="bMid" column="MEMBERNO"/>
		<result property="writeDay" column="WRITEDAY"/>
		<result property="bStatus" column="DELETESTATUS"/>
		<result property="bType" column="BOARDSTATUS"/>
		<result property="reStatus" column="REPLYSTATUS"/>
		<result property="bCount" column="BCOUNT"/>
		<collection property="replyList" javaType="java.util.ArrayList" resultMap="replyResultSet"/>
	</resultMap>
	
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
		WHERE DELETESTATUS='N'
		AND BOARDSTATUS = 'FREEBOARD'
	</select>
	
	<!-- 게시물 목록 조회용 쿼리문 -->
	<select id="selectBoardList" resultMap="boardResultSet">
		SELECT *
		FROM BOARD B
		JOIN MEMBER M ON(B.MEMBERNO = M.MEMBERNO)
		WHERE B.DELETESTATUS = 'N'
		AND BOARDSTATUS = 'FREEBOARD'
		ORDER BY BOARDNO DESC
	</select>
	
	<insert id="insertBoard" parameterType="Board">
		INSERT INTO BOARD VALUES(BN_SEQ.NEXTVAL, #{bTitle}, #{bContent}, #{bMid}, 
			SYSDATE, 'N', 'FREEBOARD', 'N',9 )
	</insert>
	
</mapper>